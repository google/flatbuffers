// <auto-generated>
//  automatically generated by the FlatBuffers compiler, do not modify
// </auto-generated>

namespace ComprehensiveTest
{

using global::System;
using global::System.Buffers;
using global::System.Collections.Generic;
using global::System.Runtime.InteropServices;
using global::Google.FlatSpanBuffers;
using global::Google.FlatSpanBuffers.Operations;
using global::Google.FlatSpanBuffers.Utils;
using global::Google.FlatSpanBuffers.Vectors;
public struct GameSession : IFlatbufferObject
{
  private Table __p;
  public ByteBuffer ByteBuffer { get { return __p.bb; } }
  public static void ValidateVersion() { FlatBufferConstants.FLATBUFFERS_25_2_10(); }
  public static GameSession GetRootAsGameSession(ByteBuffer _bb) { return GetRootAsGameSession(_bb, new GameSession()); }
  public static GameSession GetRootAsGameSession(ByteBuffer _bb, GameSession obj) { return (obj.__assign(_bb.Get<int>(_bb.Position) + _bb.Position, _bb)); }
  public static bool GameSessionBufferHasIdentifier(ByteBuffer _bb) { return Table.__has_identifier(_bb, "TEST"); }
  public static bool VerifyGameSession(ByteBuffer _bb) {Google.FlatSpanBuffers.Verifier verifier = new Google.FlatSpanBuffers.Verifier(_bb); return verifier.VerifyBuffer("TEST", false, ComprehensiveTest.GameSessionVerify.Verify); }
  public void __init(int _i, ByteBuffer _bb) { __p = new Table(_i, _bb); }
  public GameSession __assign(int _i, ByteBuffer _bb) { __init(_i, _bb); return this; }

  public string SessionId { get { int o = __p.__offset(4); return o != 0 ? __p.__string(o + __p.bb_pos) : null; } }
  public ReadOnlySpan<byte> GetSessionIdBytes() { return __p.__vector_as_span<byte>(4); }
  public int PlayerCount { get { int o = __p.__offset(6); return o != 0 ? __p.bb.Get<int>(o + __p.bb_pos) : (int)0; } }
  public long StartTime { get { int o = __p.__offset(8); return o != 0 ? __p.bb.Get<long>(o + __p.bb_pos) : (long)0; } }
  public TableVector<ComprehensiveTest.Player>? Players { get { int o = __p.__offset(12); return o != 0 ? new TableVector<ComprehensiveTest.Player>(__p, o, 4) : null; } }
  public bool TryGetPlayersByKey(int key, out ComprehensiveTest.Player value) { int o = __p.__offset(12); if (o != 0) { return ComprehensiveTest.Player.TryGetByKey(__p.__vector(o), key, __p.bb, out value); } value = default; return false; }

  public static Offset<ComprehensiveTest.GameSession> CreateGameSession(FlatBufferBuilder builder,
      StringOffset session_idOffset = default(StringOffset),
      int player_count = 0,
      long start_time = 0,
      VectorOffset playersOffset = default(VectorOffset)) {
    builder.StartTable(5);
    GameSession.AddStartTime(builder, start_time);
    GameSession.AddPlayers(builder, playersOffset);
    GameSession.AddPlayerCount(builder, player_count);
    GameSession.AddSessionId(builder, session_idOffset);
    return GameSession.EndGameSession(builder);
  }

  public static void StartGameSession(FlatBufferBuilder builder) { builder.StartTable(5); }
  public static void AddSessionId(FlatBufferBuilder builder, StringOffset sessionIdOffset) { builder.AddOffset(0, sessionIdOffset, 0); }
  public static void AddPlayerCount(FlatBufferBuilder builder, int playerCount) { builder.Add<int>(1, playerCount, 0); }
  public static void AddStartTime(FlatBufferBuilder builder, long startTime) { builder.Add<long>(2, startTime, 0); }
  public static void AddPlayers(FlatBufferBuilder builder, VectorOffset playersOffset) { builder.AddOffset(4, playersOffset, 0); }
  public static VectorOffset CreatePlayersVectorBlock(FlatBufferBuilder builder, Span<Offset<ComprehensiveTest.Player>> data) { builder.StartVector(4, data.Length, 4); builder.AddOffsetSpan<Offset<ComprehensiveTest.Player>>(data); return builder.EndVector(); }
  public static VectorOffset CreatePlayersVector(FlatBufferBuilder builder, Span<Offset<ComprehensiveTest.Player>> data) { return CreatePlayersVectorBlock(builder, data); }
  public static void StartPlayersVector(FlatBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static Offset<ComprehensiveTest.GameSession> EndGameSession(FlatBufferBuilder builder) {
    int o = builder.EndTable();
    builder.Required(o, 4);  // session_id
    return new Offset<ComprehensiveTest.GameSession>(o);
  }
  public static void FinishGameSessionBuffer(FlatBufferBuilder builder, Offset<ComprehensiveTest.GameSession> offset) { builder.Finish(offset.Value, "TEST"); }
  public static void FinishSizePrefixedGameSessionBuffer(FlatBufferBuilder builder, Offset<ComprehensiveTest.GameSession> offset) { builder.FinishSizePrefixed(offset.Value, "TEST"); }
  public GameSessionT UnPack() {
    var _o = new GameSessionT();
    this.UnPackTo(_o);
    return _o;
  }
  public void UnPackTo(GameSessionT _o) {
    _o.SessionId = this.SessionId;
    _o.PlayerCount = this.PlayerCount;
    _o.StartTime = this.StartTime;
    var _players_vec = this.Players;
    var _players_len = _players_vec.HasValue ? _players_vec.Value.Length : 0;
    if (_o.Players == null) {
      _o.Players = new List<ComprehensiveTest.PlayerT>(_players_len);
    }
    ObjectApiUtil.ResizeList(_o.Players, _players_len);
    if (_players_vec.HasValue) {
      var _players_value = _players_vec.Value;
      for (var _j = 0; _j < _players_len; ++_j) {
        var _src = _players_value[_j];
        if (_o.Players[_j] == null) { _o.Players[_j] = new PlayerT(); }
        _src.UnPackTo(_o.Players[_j]);
      }
    }
  }
  public static Offset<ComprehensiveTest.GameSession> Pack(FlatBufferBuilder builder, GameSessionT _o) {
    if (_o == null) return default(Offset<ComprehensiveTest.GameSession>);
    var _session_id = _o.SessionId == null ? default(StringOffset) : builder.CreateString(_o.SessionId);
    var _players = default(VectorOffset);
    if (_o.Players != null) {
      var _players_len = _o.Players.Count;
      Offset<ComprehensiveTest.Player>[] _players_arr = null;
      try {
        Span<Offset<ComprehensiveTest.Player>> __players = _players_len <= 64
          ? stackalloc Offset<ComprehensiveTest.Player>[_players_len]
          : (_players_arr = ArrayPool<Offset<ComprehensiveTest.Player>>.Shared.Rent(_players_len)).AsSpan(0, _players_len);
        for (var _j = 0; _j < _players_len; ++_j) { __players[_j] = ComprehensiveTest.Player.Pack(builder, _o.Players[_j]); }
        _players = CreatePlayersVector(builder, __players);
      } finally {
        if (_players_arr != null) { ArrayPool<Offset<ComprehensiveTest.Player>>.Shared.Return(_players_arr); }
      }
    }
    return CreateGameSession(
      builder,
      _session_id,
      _o.PlayerCount,
      _o.StartTime,
      _players);
  }
}

public class GameSessionT
{
  public string SessionId { get; set; }
  public int PlayerCount { get; set; }
  public long StartTime { get; set; }
  public List<ComprehensiveTest.PlayerT> Players { get; set; }

  public GameSessionT() {
    this.SessionId = null;
    this.PlayerCount = 0;
    this.StartTime = 0;
    this.Players = null;
  }
  public static GameSessionT DeserializeFromBinary(byte[] fbBuffer) {
    return GameSession.GetRootAsGameSession(new ByteBuffer(fbBuffer)).UnPack();
  }
  public byte[] SerializeToBinary() {
    var fbb = new FlatBufferBuilder(0x10000);
    GameSession.FinishGameSessionBuffer(fbb, GameSession.Pack(fbb, this));
    return fbb.DataBuffer.ToSizedSpan().ToArray();
  }
}


static public class GameSessionVerify
{
  static public bool Verify(ref Google.FlatSpanBuffers.Verifier verifier, uint tablePos)
  {
    return verifier.VerifyTableStart(tablePos)
      && verifier.VerifyString(tablePos, 4 /*SessionId*/, true)
      && verifier.VerifyField(tablePos, 6 /*PlayerCount*/, 4 /*int*/, 4, false)
      && verifier.VerifyField(tablePos, 8 /*StartTime*/, 8 /*long*/, 8, false)
      && verifier.VerifyVectorOfTables(tablePos, 12 /*Players*/, ComprehensiveTest.PlayerVerify.Verify, false)
      && verifier.VerifyTableEnd(tablePos);
  }
}

}
