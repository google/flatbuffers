// <auto-generated>
//  automatically generated by the FlatBuffers compiler, do not modify
// </auto-generated>

namespace ComprehensiveTest.StackBuffer
{

using global::System;
using global::System.Buffers;
using global::System.Collections.Generic;
using global::System.Runtime.InteropServices;
using global::Google.FlatSpanBuffers;
using global::Google.FlatSpanBuffers.Operations;
using global::Google.FlatSpanBuffers.Utils;
using global::Google.FlatSpanBuffers.Vectors;
public ref struct Player : IFlatbufferSpanObject
{
  private TableSpan __p;
  public ByteSpanBuffer ByteBuffer { get { return __p.bb; } }
  public static void ValidateVersion() { FlatBufferConstants.FLATBUFFERS_25_2_10(); }
  public static Player GetRootAsPlayer(ByteSpanBuffer _bb) { return GetRootAsPlayer(_bb, new Player()); }
  public static Player GetRootAsPlayer(ByteSpanBuffer _bb, Player obj) { return (obj.__assign(_bb.Get<int>(_bb.Position) + _bb.Position, _bb)); }
  public void __init(int _i, ByteSpanBuffer _bb) { __p = new TableSpan(_i, _bb); }
  public Player __assign(int _i, ByteSpanBuffer _bb) { __init(_i, _bb); return this; }

  public int Id { get { int o = __p.__offset(4); return o != 0 ? __p.bb.Get<int>(o + __p.bb_pos) : (int)0; } }
  public string Name { get { int o = __p.__offset(6); return o != 0 ? __p.__string(o + __p.bb_pos) : null; } }
  public ReadOnlySpan<byte> GetNameBytes() { return __p.__vector_as_span<byte>(6); }
  public int Level { get { int o = __p.__offset(8); return o != 0 ? __p.bb.Get<int>(o + __p.bb_pos) : (int)1; } }
  public long Experience { get { int o = __p.__offset(10); return o != 0 ? __p.bb.Get<long>(o + __p.bb_pos) : (long)0; } }
  public float Health { get { int o = __p.__offset(12); return o != 0 ? __p.bb.Get<float>(o + __p.bb_pos) : (float)100.0f; } }
  public float Mana { get { int o = __p.__offset(14); return o != 0 ? __p.bb.Get<float>(o + __p.bb_pos) : (float)50.0f; } }
  public RefStructNullable<ReadOnlySpan<ComprehensiveTest.Equipment>> InventoryType { get { int o = __p.__offset(16); return o != 0 ? new RefStructNullable<ReadOnlySpan<ComprehensiveTest.Equipment>>(__p.__vector_as_span<ComprehensiveTest.Equipment>(16)) : default; } }
  public RefStructNullable<UnionVectorSpan> Inventory { get { int o = __p.__offset(18); return o != 0 ? new RefStructNullable<UnionVectorSpan>(new UnionVectorSpan(__p, o, 4)) : default; } }
  public RefStructNullable<StringVectorSpan> Skills { get { int o = __p.__offset(20); return o != 0 ? new RefStructNullable<StringVectorSpan>(new StringVectorSpan(__p, o)) : default; } }
  public RefStructNullable<ReadOnlySpan<int>> Stats { get { int o = __p.__offset(22); return o != 0 ? new RefStructNullable<ReadOnlySpan<int>>(__p.__vector_as_span<int>(22)) : default; } }
  public RefStructNullable<ComprehensiveTest.StackBuffer.Vec3> SpawnPoint { get { int o = __p.__offset(24); return o != 0 ? new RefStructNullable<ComprehensiveTest.StackBuffer.Vec3>((new ComprehensiveTest.StackBuffer.Vec3()).__assign(o + __p.bb_pos, __p.bb)) : default; } }
  public ComprehensiveTest.Status Status { get { int o = __p.__offset(26); return o != 0 ? (ComprehensiveTest.Status)__p.bb.Get<int>(o + __p.bb_pos) : ComprehensiveTest.Status.Pending; } }
  public ComprehensiveTest.Equipment EquippedTypeType { get { int o = __p.__offset(28); return o != 0 ? (ComprehensiveTest.Equipment)__p.bb.Get<byte>(o + __p.bb_pos) : ComprehensiveTest.Equipment.NONE; } }
  public RefStructNullable<TTable> EquippedType<TTable>() where TTable : struct, IFlatbufferSpanObject, allows ref struct { int o = __p.__offset(30); return o != 0 ? new RefStructNullable<TTable>(__p.__union<TTable>(o + __p.bb_pos)) : default; }
  public ComprehensiveTest.StackBuffer.Weapon EquippedTypeAsWeapon() { return EquippedType<ComprehensiveTest.StackBuffer.Weapon>().Value; }
  public ComprehensiveTest.StackBuffer.Armor EquippedTypeAsArmor() { return EquippedType<ComprehensiveTest.StackBuffer.Armor>().Value; }
  public ComprehensiveTest.Equipment EquippedItemType { get { int o = __p.__offset(32); return o != 0 ? (ComprehensiveTest.Equipment)__p.bb.Get<byte>(o + __p.bb_pos) : ComprehensiveTest.Equipment.NONE; } }
  public RefStructNullable<TTable> EquippedItem<TTable>() where TTable : struct, IFlatbufferSpanObject, allows ref struct { int o = __p.__offset(34); return o != 0 ? new RefStructNullable<TTable>(__p.__union<TTable>(o + __p.bb_pos)) : default; }
  public ComprehensiveTest.StackBuffer.Weapon EquippedItemAsWeapon() { return EquippedItem<ComprehensiveTest.StackBuffer.Weapon>().Value; }
  public ComprehensiveTest.StackBuffer.Armor EquippedItemAsArmor() { return EquippedItem<ComprehensiveTest.StackBuffer.Armor>().Value; }

  public static void StartPlayer(ref FlatSpanBufferBuilder builder) { builder.StartTable(16); }
  public static void AddId(ref FlatSpanBufferBuilder builder, int id) { builder.Add<int>(0, id, 0); }
  public static void AddName(ref FlatSpanBufferBuilder builder, StringOffset nameOffset) { builder.AddOffset(1, nameOffset, 0); }
  public static void AddLevel(ref FlatSpanBufferBuilder builder, int level) { builder.Add<int>(2, level, 1); }
  public static void AddExperience(ref FlatSpanBufferBuilder builder, long experience) { builder.Add<long>(3, experience, 0); }
  public static void AddHealth(ref FlatSpanBufferBuilder builder, float health) { builder.Add<float>(4, health, 100.0f); }
  public static void AddMana(ref FlatSpanBufferBuilder builder, float mana) { builder.Add<float>(5, mana, 50.0f); }
  public static void AddInventoryType(ref FlatSpanBufferBuilder builder, VectorOffset inventoryTypeOffset) { builder.AddOffset(6, inventoryTypeOffset, 0); }
  public static VectorOffset CreateInventoryTypeVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<ComprehensiveTest.Equipment> data) { builder.StartVector(1, data.Length, 1); builder.AddSpan<ComprehensiveTest.Equipment>(data); return builder.EndVector(); }
  public static VectorOffset CreateInventoryTypeVector(ref FlatSpanBufferBuilder builder, scoped Span<ComprehensiveTest.Equipment> data) { return CreateInventoryTypeVectorBlock(ref builder, data); }
  public static void StartInventoryTypeVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(1, numElems, 1); }
  public static void AddInventory(ref FlatSpanBufferBuilder builder, VectorOffset inventoryOffset) { builder.AddOffset(7, inventoryOffset, 0); }
  public static VectorOffset CreateInventoryVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<int> data) { builder.StartVector(4, data.Length, 4); builder.AddOffsetSpan(data); return builder.EndVector(); }
  public static VectorOffset CreateInventoryVector(ref FlatSpanBufferBuilder builder, scoped Span<int> data) { return CreateInventoryVectorBlock(ref builder, data); }
  public static void StartInventoryVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static void AddSkills(ref FlatSpanBufferBuilder builder, VectorOffset skillsOffset) { builder.AddOffset(8, skillsOffset, 0); }
  public static VectorOffset CreateSkillsVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<StringOffset> data) { builder.StartVector(4, data.Length, 4); builder.AddOffsetSpan<StringOffset>(data); return builder.EndVector(); }
  public static VectorOffset CreateSkillsVector(ref FlatSpanBufferBuilder builder, scoped Span<StringOffset> data) { return CreateSkillsVectorBlock(ref builder, data); }
  public static void StartSkillsVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static void AddStats(ref FlatSpanBufferBuilder builder, VectorOffset statsOffset) { builder.AddOffset(9, statsOffset, 0); }
  public static VectorOffset CreateStatsVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<int> data) { builder.StartVector(4, data.Length, 4); builder.AddSpan<int>(data); return builder.EndVector(); }
  public static VectorOffset CreateStatsVector(ref FlatSpanBufferBuilder builder, scoped Span<int> data) { return CreateStatsVectorBlock(ref builder, data); }
  public static void StartStatsVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static void AddSpawnPoint(ref FlatSpanBufferBuilder builder, Offset<ComprehensiveTest.StackBuffer.Vec3> spawnPointOffset) { builder.AddStruct(10, spawnPointOffset, 0); }
  public static void AddStatus(ref FlatSpanBufferBuilder builder, ComprehensiveTest.Status status) { builder.Add<int>(11, (int)status, 0); }
  public static void AddEquippedTypeType(ref FlatSpanBufferBuilder builder, ComprehensiveTest.Equipment equippedTypeType) { builder.Add<byte>(12, (byte)equippedTypeType, 0); }
  public static void AddEquippedType(ref FlatSpanBufferBuilder builder, int equippedTypeOffset) { builder.AddOffset(13, equippedTypeOffset, 0); }
  public static void AddEquippedItemType(ref FlatSpanBufferBuilder builder, ComprehensiveTest.Equipment equippedItemType) { builder.Add<byte>(14, (byte)equippedItemType, 0); }
  public static void AddEquippedItem(ref FlatSpanBufferBuilder builder, int equippedItemOffset) { builder.AddOffset(15, equippedItemOffset, 0); }
  public static Offset<ComprehensiveTest.StackBuffer.Player> EndPlayer(ref FlatSpanBufferBuilder builder) {
    int o = builder.EndTable();
    builder.Required(o, 6);  // name
    return new Offset<ComprehensiveTest.StackBuffer.Player>(o);
  }

  public static VectorOffset CreateSortedVectorOfPlayer(ref FlatSpanBufferBuilder builder, scoped Span<Offset<Player>> offsets) {
    var comparer = new SortedVectorUtils.ScalarOffsetComparer<Player, ByteSpanBuffer, int>(builder.DataBuffer, 4);
    RefStructSorters.Sort(offsets, ref comparer);
    return builder.CreateVectorOfTables<Player>(offsets);
  }

  public static bool TryGetByKey(int vectorLocation, int key, ByteSpanBuffer bb, out Player value) {
    return SortedVectorUtils.TryGetByKey<Player, int, ByteSpanBuffer>(vectorLocation, key, ref bb, 4, 0, out value);
  }
  public PlayerT UnPack() {
    var _o = new PlayerT();
    this.UnPackTo(_o);
    return _o;
  }
  public void UnPackTo(PlayerT _o) {
    _o.Id = this.Id;
    _o.Name = this.Name;
    _o.Level = this.Level;
    _o.Experience = this.Experience;
    _o.Health = this.Health;
    _o.Mana = this.Mana;
    var _inventory_types = this.InventoryType;
    var _inventory = this.Inventory;
    var _inventory_len = _inventory.HasValue ? _inventory.Value.Length : 0;
    if (_o.Inventory == null) {
      _o.Inventory = new List<ComprehensiveTest.EquipmentUnion>(_inventory_len);
    }
    ObjectApiUtil.ResizeList(_o.Inventory, _inventory_len);
    if (_inventory.HasValue) {
      var _inventory_value = _inventory.Value;
      var _inventory_types_value = _inventory_types.Value;
      for (var _j = 0; _j < _inventory_len; ++_j) {
        var _inventory_type = _inventory_types_value[_j];
        var _o_Inventory = _o.Inventory[_j];
        if (_o_Inventory == null) {
          _o_Inventory = new ComprehensiveTest.EquipmentUnion();
          _o.Inventory[_j] = _o_Inventory;
        }
        var _inventory_old_type = _o_Inventory.Type;
        _o_Inventory.Type = _inventory_type;
        switch (_inventory_type) {
          default:
            _o_Inventory.Value = null;
            break;
          case ComprehensiveTest.Equipment.Weapon:
            if (_inventory_old_type == ComprehensiveTest.Equipment.Weapon) {
              _inventory_value.GetAs<ComprehensiveTest.StackBuffer.Weapon>(_j).UnPackTo((ComprehensiveTest.WeaponT)_o_Inventory.Value);
            } else {
              _o_Inventory.Value = _inventory_value.GetAs<ComprehensiveTest.StackBuffer.Weapon>(_j).UnPack();
            }
            break;
          case ComprehensiveTest.Equipment.Armor:
            if (_inventory_old_type == ComprehensiveTest.Equipment.Armor) {
              _inventory_value.GetAs<ComprehensiveTest.StackBuffer.Armor>(_j).UnPackTo((ComprehensiveTest.ArmorT)_o_Inventory.Value);
            } else {
              _o_Inventory.Value = _inventory_value.GetAs<ComprehensiveTest.StackBuffer.Armor>(_j).UnPack();
            }
            break;
        }
      }
    }
    var _skills_vec = this.Skills;
    var _skills_len = _skills_vec.HasValue ? _skills_vec.Value.Length : 0;
    if (_o.Skills == null) {
      _o.Skills = new List<string>(_skills_len);
    } else {
      _o.Skills.Clear();
      if (_o.Skills.Capacity < _skills_len) {
        _o.Skills.Capacity = _skills_len;
      }
    }
    if (_skills_vec.HasValue) {
      var _skills_value = _skills_vec.Value;
      for (var _j = 0; _j < _skills_len; ++_j) { _o.Skills.Add(_skills_value[_j]); }
    }
    var _stats_vec = this.Stats;
    var _stats_len = _stats_vec.HasValue ? _stats_vec.Value.Length : 0;
    if (_o.Stats == null) {
      _o.Stats = new List<int>(_stats_len);
    }
    ObjectApiUtil.ResizeList(_o.Stats, _stats_len);
    if (_stats_vec.HasValue) { _stats_vec.Value.CopyTo(CollectionsMarshal.AsSpan(_o.Stats)); }
    if (this.SpawnPoint.HasValue) {
      if (_o.SpawnPoint == null) _o.SpawnPoint = new ComprehensiveTest.Vec3T();
      this.SpawnPoint.Value.UnPackTo(_o.SpawnPoint);
    } else {
      _o.SpawnPoint = null;
    }
    _o.Status = this.Status;
    if (_o.EquippedType == null) {
      _o.EquippedType = new ComprehensiveTest.EquipmentUnion();
    }
    var _EquippedTypeOldType = _o.EquippedType.Type;
    _o.EquippedType.Type = this.EquippedTypeType;
    switch (this.EquippedTypeType) {
      default:
        _o.EquippedType.Value = null;
        break;
      case ComprehensiveTest.Equipment.Weapon:
        if (this.EquippedType<ComprehensiveTest.StackBuffer.Weapon>().HasValue) {
          if (_EquippedTypeOldType == ComprehensiveTest.Equipment.Weapon) {
            this.EquippedType<ComprehensiveTest.StackBuffer.Weapon>().Value.UnPackTo((ComprehensiveTest.WeaponT)_o.EquippedType.Value);
          } else {
            _o.EquippedType.Value = this.EquippedType<ComprehensiveTest.StackBuffer.Weapon>().Value.UnPack();
          }
        } else {
          _o.EquippedType.Value = null;
        }
        break;
      case ComprehensiveTest.Equipment.Armor:
        if (this.EquippedType<ComprehensiveTest.StackBuffer.Armor>().HasValue) {
          if (_EquippedTypeOldType == ComprehensiveTest.Equipment.Armor) {
            this.EquippedType<ComprehensiveTest.StackBuffer.Armor>().Value.UnPackTo((ComprehensiveTest.ArmorT)_o.EquippedType.Value);
          } else {
            _o.EquippedType.Value = this.EquippedType<ComprehensiveTest.StackBuffer.Armor>().Value.UnPack();
          }
        } else {
          _o.EquippedType.Value = null;
        }
        break;
    }
    if (_o.EquippedItem == null) {
      _o.EquippedItem = new ComprehensiveTest.EquipmentUnion();
    }
    var _EquippedItemOldType = _o.EquippedItem.Type;
    _o.EquippedItem.Type = this.EquippedItemType;
    switch (this.EquippedItemType) {
      default:
        _o.EquippedItem.Value = null;
        break;
      case ComprehensiveTest.Equipment.Weapon:
        if (this.EquippedItem<ComprehensiveTest.StackBuffer.Weapon>().HasValue) {
          if (_EquippedItemOldType == ComprehensiveTest.Equipment.Weapon) {
            this.EquippedItem<ComprehensiveTest.StackBuffer.Weapon>().Value.UnPackTo((ComprehensiveTest.WeaponT)_o.EquippedItem.Value);
          } else {
            _o.EquippedItem.Value = this.EquippedItem<ComprehensiveTest.StackBuffer.Weapon>().Value.UnPack();
          }
        } else {
          _o.EquippedItem.Value = null;
        }
        break;
      case ComprehensiveTest.Equipment.Armor:
        if (this.EquippedItem<ComprehensiveTest.StackBuffer.Armor>().HasValue) {
          if (_EquippedItemOldType == ComprehensiveTest.Equipment.Armor) {
            this.EquippedItem<ComprehensiveTest.StackBuffer.Armor>().Value.UnPackTo((ComprehensiveTest.ArmorT)_o.EquippedItem.Value);
          } else {
            _o.EquippedItem.Value = this.EquippedItem<ComprehensiveTest.StackBuffer.Armor>().Value.UnPack();
          }
        } else {
          _o.EquippedItem.Value = null;
        }
        break;
    }
  }
  public static Offset<ComprehensiveTest.StackBuffer.Player> Pack(ref FlatSpanBufferBuilder builder, PlayerT _o) {
    if (_o == null) return default(Offset<ComprehensiveTest.StackBuffer.Player>);
    var _name = _o.Name == null ? default(StringOffset) : builder.CreateString(_o.Name);
    var _inventory_type = default(VectorOffset);
    if (_o.Inventory != null) {
      var _inventory_type_len = _o.Inventory.Count;
      ComprehensiveTest.Equipment[] _inventory_type_arr = null;
      try {
        Span<ComprehensiveTest.Equipment> __inventory_type = _inventory_type_len <= 256
          ? stackalloc ComprehensiveTest.Equipment[_inventory_type_len]
          : (_inventory_type_arr = ArrayPool<ComprehensiveTest.Equipment>.Shared.Rent(_inventory_type_len)).AsSpan(0, _inventory_type_len);
        for (var _j = 0; _j < _inventory_type_len; ++_j) { __inventory_type[_j] = _o.Inventory[_j].Type; }
        _inventory_type = CreateInventoryTypeVector(ref builder, __inventory_type);
      } finally {
        if (_inventory_type_arr != null) { ArrayPool<ComprehensiveTest.Equipment>.Shared.Return(_inventory_type_arr); }
      }
    }
    var _inventory = default(VectorOffset);
    if (_o.Inventory != null) {
      var _inventory_len = _o.Inventory.Count;
      int[] _inventory_arr = null;
      try {
        Span<int> __inventory = _inventory_len <= 64
          ? stackalloc int[_inventory_len]
          : (_inventory_arr = ArrayPool<int>.Shared.Rent(_inventory_len)).AsSpan(0, _inventory_len);
        for (var _j = 0; _j < _inventory_len; ++_j) { __inventory[_j] = ComprehensiveTest.EquipmentUnion.Pack(ref builder,  _o.Inventory[_j]); }
        _inventory = CreateInventoryVector(ref builder, __inventory);
      } finally {
        if (_inventory_arr != null) { ArrayPool<int>.Shared.Return(_inventory_arr); }
      }
    }
    var _skills = default(VectorOffset);
    if (_o.Skills != null) {
      var _skills_len = _o.Skills.Count;
      StringOffset[] _skills_arr = null;
      try {
        Span<StringOffset> __skills = _skills_len <= 64
          ? stackalloc StringOffset[_skills_len]
          : (_skills_arr = ArrayPool<StringOffset>.Shared.Rent(_skills_len)).AsSpan(0, _skills_len);
        for (var _j = 0; _j < _skills_len; ++_j) { __skills[_j] = builder.CreateString(_o.Skills[_j]); }
        _skills = CreateSkillsVector(ref builder, __skills);
      } finally {
        if (_skills_arr != null) { ArrayPool<StringOffset>.Shared.Return(_skills_arr); }
      }
    }
    var _stats = default(VectorOffset);
    if (_o.Stats != null) {
      _stats = CreateStatsVector(ref builder, CollectionsMarshal.AsSpan(_o.Stats));
    }
    var _equipped_type_type = _o.EquippedType == null ? ComprehensiveTest.Equipment.NONE : _o.EquippedType.Type;
    var _equipped_type = _o.EquippedType == null ? 0 : ComprehensiveTest.EquipmentUnion.Pack(ref builder, _o.EquippedType);
    var _equipped_item_type = _o.EquippedItem == null ? ComprehensiveTest.Equipment.NONE : _o.EquippedItem.Type;
    var _equipped_item = _o.EquippedItem == null ? 0 : ComprehensiveTest.EquipmentUnion.Pack(ref builder, _o.EquippedItem);
    StartPlayer(ref builder);
    AddId(ref builder, _o.Id);
    AddName(ref builder, _name);
    AddLevel(ref builder, _o.Level);
    AddExperience(ref builder, _o.Experience);
    AddHealth(ref builder, _o.Health);
    AddMana(ref builder, _o.Mana);
    AddInventoryType(ref builder, _inventory_type);
    AddInventory(ref builder, _inventory);
    AddSkills(ref builder, _skills);
    AddStats(ref builder, _stats);
    AddSpawnPoint(ref builder, ComprehensiveTest.StackBuffer.Vec3.Pack(ref builder, _o.SpawnPoint));
    AddStatus(ref builder, _o.Status);
    AddEquippedTypeType(ref builder, _equipped_type_type);
    AddEquippedType(ref builder, _equipped_type);
    AddEquippedItemType(ref builder, _equipped_item_type);
    AddEquippedItem(ref builder, _equipped_item);
    return EndPlayer(ref builder);
  }
}


}
