// <auto-generated>
//  automatically generated by the FlatBuffers compiler, do not modify
// </auto-generated>

namespace ComprehensiveTest.StackBuffer
{

using global::System;
using global::System.Buffers;
using global::System.Collections.Generic;
using global::System.Runtime.InteropServices;
using global::Google.FlatSpanBuffers;
using global::Google.FlatSpanBuffers.Operations;
using global::Google.FlatSpanBuffers.Utils;
using global::Google.FlatSpanBuffers.Vectors;
public ref struct GameSession : IFlatbufferSpanObject
{
  private TableSpan __p;
  public ByteSpanBuffer ByteBuffer { get { return __p.bb; } }
  public static void ValidateVersion() { FlatBufferConstants.FLATBUFFERS_25_2_10(); }
  public static GameSession GetRootAsGameSession(ByteSpanBuffer _bb) { return GetRootAsGameSession(_bb, new GameSession()); }
  public static GameSession GetRootAsGameSession(ByteSpanBuffer _bb, GameSession obj) { return (obj.__assign(_bb.Get<int>(_bb.Position) + _bb.Position, _bb)); }
  public static bool GameSessionBufferHasIdentifier(ByteSpanBuffer _bb) { return TableSpan.__has_identifier(_bb, "TEST"); }
  public static bool VerifyGameSession(ByteSpanBuffer _bb) {Google.FlatSpanBuffers.Verifier verifier = new Google.FlatSpanBuffers.Verifier(_bb); return verifier.VerifyBuffer("TEST", false, ComprehensiveTest.GameSessionVerify.Verify); }
  public void __init(int _i, ByteSpanBuffer _bb) { __p = new TableSpan(_i, _bb); }
  public GameSession __assign(int _i, ByteSpanBuffer _bb) { __init(_i, _bb); return this; }

  public string SessionId { get { int o = __p.__offset(4); return o != 0 ? __p.__string(o + __p.bb_pos) : null; } }
  public ReadOnlySpan<byte> GetSessionIdBytes() { return __p.__vector_as_span<byte>(4); }
  public int PlayerCount { get { int o = __p.__offset(6); return o != 0 ? __p.bb.Get<int>(o + __p.bb_pos) : (int)0; } }
  public long StartTime { get { int o = __p.__offset(8); return o != 0 ? __p.bb.Get<long>(o + __p.bb_pos) : (long)0; } }
  public RefStructNullable<TableVectorSpan<ComprehensiveTest.StackBuffer.Player>> Players { get { int o = __p.__offset(12); return o != 0 ? new RefStructNullable<TableVectorSpan<ComprehensiveTest.StackBuffer.Player>>(new TableVectorSpan<ComprehensiveTest.StackBuffer.Player>(__p, o, 4)) : default; } }
  public bool TryGetPlayersByKey(int key, out ComprehensiveTest.StackBuffer.Player value) { int o = __p.__offset(12); if (o != 0) { return ComprehensiveTest.StackBuffer.Player.TryGetByKey(__p.__vector(o), key, __p.bb, out value); } value = default; return false; }

  public static Offset<ComprehensiveTest.StackBuffer.GameSession> CreateGameSession(ref FlatSpanBufferBuilder builder,
      StringOffset session_idOffset = default(StringOffset),
      int player_count = 0,
      long start_time = 0,
      VectorOffset playersOffset = default(VectorOffset)) {
    builder.StartTable(5);
    GameSession.AddStartTime(ref builder, start_time);
    GameSession.AddPlayers(ref builder, playersOffset);
    GameSession.AddPlayerCount(ref builder, player_count);
    GameSession.AddSessionId(ref builder, session_idOffset);
    return GameSession.EndGameSession(ref builder);
  }

  public static void StartGameSession(ref FlatSpanBufferBuilder builder) { builder.StartTable(5); }
  public static void AddSessionId(ref FlatSpanBufferBuilder builder, StringOffset sessionIdOffset) { builder.AddOffset(0, sessionIdOffset, 0); }
  public static void AddPlayerCount(ref FlatSpanBufferBuilder builder, int playerCount) { builder.Add<int>(1, playerCount, 0); }
  public static void AddStartTime(ref FlatSpanBufferBuilder builder, long startTime) { builder.Add<long>(2, startTime, 0); }
  public static void AddPlayers(ref FlatSpanBufferBuilder builder, VectorOffset playersOffset) { builder.AddOffset(4, playersOffset, 0); }
  public static VectorOffset CreatePlayersVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<Offset<ComprehensiveTest.StackBuffer.Player>> data) { builder.StartVector(4, data.Length, 4); builder.AddOffsetSpan<Offset<ComprehensiveTest.StackBuffer.Player>>(data); return builder.EndVector(); }
  public static VectorOffset CreatePlayersVector(ref FlatSpanBufferBuilder builder, scoped Span<Offset<ComprehensiveTest.StackBuffer.Player>> data) { return CreatePlayersVectorBlock(ref builder, data); }
  public static void StartPlayersVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static Offset<ComprehensiveTest.StackBuffer.GameSession> EndGameSession(ref FlatSpanBufferBuilder builder) {
    int o = builder.EndTable();
    builder.Required(o, 4);  // session_id
    return new Offset<ComprehensiveTest.StackBuffer.GameSession>(o);
  }
  public static void FinishGameSessionBuffer(ref FlatSpanBufferBuilder builder, Offset<ComprehensiveTest.StackBuffer.GameSession> offset) { builder.Finish(offset.Value, "TEST"); }
  public static void FinishSizePrefixedGameSessionBuffer(ref FlatSpanBufferBuilder builder, Offset<ComprehensiveTest.StackBuffer.GameSession> offset) { builder.FinishSizePrefixed(offset.Value, "TEST"); }
  public GameSessionT UnPack() {
    var _o = new GameSessionT();
    this.UnPackTo(_o);
    return _o;
  }
  public void UnPackTo(GameSessionT _o) {
    _o.SessionId = this.SessionId;
    _o.PlayerCount = this.PlayerCount;
    _o.StartTime = this.StartTime;
    var _players_vec = this.Players;
    var _players_len = _players_vec.HasValue ? _players_vec.Value.Length : 0;
    if (_o.Players == null) {
      _o.Players = new List<ComprehensiveTest.PlayerT>(_players_len);
    }
    ObjectApiUtil.ResizeList(_o.Players, _players_len);
    if (_players_vec.HasValue) {
      var _players_value = _players_vec.Value;
      for (var _j = 0; _j < _players_len; ++_j) {
        var _src = _players_value[_j];
        if (_o.Players[_j] == null) { _o.Players[_j] = new PlayerT(); }
        _src.UnPackTo(_o.Players[_j]);
      }
    }
  }
  public static Offset<ComprehensiveTest.StackBuffer.GameSession> Pack(ref FlatSpanBufferBuilder builder, GameSessionT _o) {
    if (_o == null) return default(Offset<ComprehensiveTest.StackBuffer.GameSession>);
    var _session_id = _o.SessionId == null ? default(StringOffset) : builder.CreateString(_o.SessionId);
    var _players = default(VectorOffset);
    if (_o.Players != null) {
      var _players_len = _o.Players.Count;
      Offset<ComprehensiveTest.StackBuffer.Player>[] _players_arr = null;
      try {
        Span<Offset<ComprehensiveTest.StackBuffer.Player>> __players = _players_len <= 64
          ? stackalloc Offset<ComprehensiveTest.StackBuffer.Player>[_players_len]
          : (_players_arr = ArrayPool<Offset<ComprehensiveTest.StackBuffer.Player>>.Shared.Rent(_players_len)).AsSpan(0, _players_len);
        for (var _j = 0; _j < _players_len; ++_j) { __players[_j] = ComprehensiveTest.StackBuffer.Player.Pack(ref builder, _o.Players[_j]); }
        _players = CreatePlayersVector(ref builder, __players);
      } finally {
        if (_players_arr != null) { ArrayPool<Offset<ComprehensiveTest.StackBuffer.Player>>.Shared.Return(_players_arr); }
      }
    }
    return CreateGameSession(
      ref builder,
      _session_id,
      _o.PlayerCount,
      _o.StartTime,
      _players);
  }
}


}
