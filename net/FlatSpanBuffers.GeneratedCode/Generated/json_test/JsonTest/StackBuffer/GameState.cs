// <auto-generated>
//  automatically generated by the FlatBuffers compiler, do not modify
// </auto-generated>

namespace JsonTest.StackBuffer
{

using global::System;
using global::System.Buffers;
using global::System.Collections.Generic;
using global::System.Runtime.InteropServices;
using global::Google.FlatSpanBuffers;
using global::Google.FlatSpanBuffers.Operations;
using global::Google.FlatSpanBuffers.Utils;
using global::Google.FlatSpanBuffers.Vectors;
public ref struct GameState : IFlatbufferSpanObject
{
  private TableSpan __p;
  public ByteSpanBuffer ByteBuffer { get { return __p.bb; } }
  public static void ValidateVersion() { FlatBufferConstants.FLATBUFFERS_25_2_10(); }
  public static GameState GetRootAsGameState(ByteSpanBuffer _bb) { return GetRootAsGameState(_bb, new GameState()); }
  public static GameState GetRootAsGameState(ByteSpanBuffer _bb, GameState obj) { return (obj.__assign(_bb.Get<int>(_bb.Position) + _bb.Position, _bb)); }
  public static bool GameStateBufferHasIdentifier(ByteSpanBuffer _bb) { return TableSpan.__has_identifier(_bb, "JSON"); }
  public static bool VerifyGameState(ByteSpanBuffer _bb) {Google.FlatSpanBuffers.Verifier verifier = new Google.FlatSpanBuffers.Verifier(_bb); return verifier.VerifyBuffer("JSON", false, JsonTest.GameStateVerify.Verify); }
  public void __init(int _i, ByteSpanBuffer _bb) { __p = new TableSpan(_i, _bb); }
  public GameState __assign(int _i, ByteSpanBuffer _bb) { __init(_i, _bb); return this; }

  public string Version { get { int o = __p.__offset(4); return o != 0 ? __p.__string(o + __p.bb_pos) : null; } }
  public ReadOnlySpan<byte> GetVersionBytes() { return __p.__vector_as_span<byte>(4); }
  public RefStructNullable<TableVectorSpan<JsonTest.StackBuffer.Player>> Players { get { int o = __p.__offset(6); return o != 0 ? new RefStructNullable<TableVectorSpan<JsonTest.StackBuffer.Player>>(new TableVectorSpan<JsonTest.StackBuffer.Player>(__p, o, 4)) : default; } }
  public bool TryGetPlayersByKey(string key, out JsonTest.StackBuffer.Player value) { int o = __p.__offset(6); if (o != 0) { return JsonTest.StackBuffer.Player.TryGetByKey(__p.__vector(o), key, __p.bb, out value); } value = default; return false; }
  public long ActivePlayerId { get { int o = __p.__offset(8); return o != 0 ? __p.bb.Get<long>(o + __p.bb_pos) : (long)0; } }
  public long Timestamp { get { int o = __p.__offset(10); return o != 0 ? __p.bb.Get<long>(o + __p.bb_pos) : (long)0; } }

  public static Offset<JsonTest.StackBuffer.GameState> CreateGameState(ref FlatSpanBufferBuilder builder,
      StringOffset versionOffset = default(StringOffset),
      VectorOffset playersOffset = default(VectorOffset),
      long active_player_id = 0,
      long timestamp = 0) {
    builder.StartTable(4);
    GameState.AddTimestamp(ref builder, timestamp);
    GameState.AddActivePlayerId(ref builder, active_player_id);
    GameState.AddPlayers(ref builder, playersOffset);
    GameState.AddVersion(ref builder, versionOffset);
    return GameState.EndGameState(ref builder);
  }

  public static void StartGameState(ref FlatSpanBufferBuilder builder) { builder.StartTable(4); }
  public static void AddVersion(ref FlatSpanBufferBuilder builder, StringOffset versionOffset) { builder.AddOffset(0, versionOffset, 0); }
  public static void AddPlayers(ref FlatSpanBufferBuilder builder, VectorOffset playersOffset) { builder.AddOffset(1, playersOffset, 0); }
  public static VectorOffset CreatePlayersVectorBlock(ref FlatSpanBufferBuilder builder, scoped Span<Offset<JsonTest.StackBuffer.Player>> data) { builder.StartVector(4, data.Length, 4); builder.AddOffsetSpan<Offset<JsonTest.StackBuffer.Player>>(data); return builder.EndVector(); }
  public static VectorOffset CreatePlayersVector(ref FlatSpanBufferBuilder builder, scoped Span<Offset<JsonTest.StackBuffer.Player>> data) { return CreatePlayersVectorBlock(ref builder, data); }
  public static void StartPlayersVector(ref FlatSpanBufferBuilder builder, int numElems) { builder.StartVector(4, numElems, 4); }
  public static void AddActivePlayerId(ref FlatSpanBufferBuilder builder, long activePlayerId) { builder.Add<long>(2, activePlayerId, 0); }
  public static void AddTimestamp(ref FlatSpanBufferBuilder builder, long timestamp) { builder.Add<long>(3, timestamp, 0); }
  public static Offset<JsonTest.StackBuffer.GameState> EndGameState(ref FlatSpanBufferBuilder builder) {
    int o = builder.EndTable();
    return new Offset<JsonTest.StackBuffer.GameState>(o);
  }
  public static void FinishGameStateBuffer(ref FlatSpanBufferBuilder builder, Offset<JsonTest.StackBuffer.GameState> offset) { builder.Finish(offset.Value, "JSON"); }
  public static void FinishSizePrefixedGameStateBuffer(ref FlatSpanBufferBuilder builder, Offset<JsonTest.StackBuffer.GameState> offset) { builder.FinishSizePrefixed(offset.Value, "JSON"); }
  public GameStateT UnPack() {
    var _o = new GameStateT();
    this.UnPackTo(_o);
    return _o;
  }
  public void UnPackTo(GameStateT _o) {
    _o.Version = this.Version;
    var _players_vec = this.Players;
    var _players_len = _players_vec.HasValue ? _players_vec.Value.Length : 0;
    if (_o.Players == null) {
      _o.Players = new List<JsonTest.PlayerT>(_players_len);
    }
    ObjectApiUtil.ResizeList(_o.Players, _players_len);
    if (_players_vec.HasValue) {
      var _players_value = _players_vec.Value;
      for (var _j = 0; _j < _players_len; ++_j) {
        var _src = _players_value[_j];
        if (_o.Players[_j] == null) { _o.Players[_j] = new PlayerT(); }
        _src.UnPackTo(_o.Players[_j]);
      }
    }
    _o.ActivePlayerId = this.ActivePlayerId;
    _o.Timestamp = this.Timestamp;
  }
  public static Offset<JsonTest.StackBuffer.GameState> Pack(ref FlatSpanBufferBuilder builder, GameStateT _o) {
    if (_o == null) return default(Offset<JsonTest.StackBuffer.GameState>);
    var _version = _o.Version == null ? default(StringOffset) : builder.CreateString(_o.Version);
    var _players = default(VectorOffset);
    if (_o.Players != null) {
      var _players_len = _o.Players.Count;
      Offset<JsonTest.StackBuffer.Player>[] _players_arr = null;
      try {
        Span<Offset<JsonTest.StackBuffer.Player>> __players = _players_len <= 64
          ? stackalloc Offset<JsonTest.StackBuffer.Player>[_players_len]
          : (_players_arr = ArrayPool<Offset<JsonTest.StackBuffer.Player>>.Shared.Rent(_players_len)).AsSpan(0, _players_len);
        for (var _j = 0; _j < _players_len; ++_j) { __players[_j] = JsonTest.StackBuffer.Player.Pack(ref builder, _o.Players[_j]); }
        _players = CreatePlayersVector(ref builder, __players);
      } finally {
        if (_players_arr != null) { ArrayPool<Offset<JsonTest.StackBuffer.Player>>.Shared.Return(_players_arr); }
      }
    }
    return CreateGameState(
      ref builder,
      _version,
      _players,
      _o.ActivePlayerId,
      _o.Timestamp);
  }
}


}
